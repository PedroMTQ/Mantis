# Output

## Mantis Output

This tool generates 3 tab-separated output files (along with HMMER's default output), the `output_annotation.tsv`,`interpreted_annotation.tsv`, and `consensus_annotation.tsv`:  

The `output_annotation.tsv` will look something like this:  

| Query  | HMM_file | HMM_hit | Query_length | Query_hit_start | Query_hit_end | HMM_hit_start | HMM_hit_end | evalue |
| :-------------: | :-------------: | :-------------: | :-------------: | :-------------: | :-------------: | :-------------: | :-------------: | :-------------: |
| Query_1  | HMM_file_1  | HMM_hit_1  | 154  | 64  | 90  | 85  | 105  | 2.1e-46  |

The `output_annotation.tsv` is not very informative when we need to connect our annotations to metadata, that's why I've included `interpreted_annotation.tsv`.


The `interpreted_annotation.tsv` will look something like this:  

| Query  | HMM_file | HMM_hit | HMM_hit_accession | evalue | Query_length | Query_hit_start | Query_hit_end | HMM_hit_start | HMM_hit_end | I | Links |  |  |
| :-------------: | :-------------: | :-------------: |:-------------: | :-------------: | :------------- | :------------- | :------------- | :------------- | :------------- | :------------- | :------------- | :------------- | :------------- |
| Query_1  | HMM_file_1  | HMM_hit_1  | HMM_hit_accession_1  | 2.1e-46  | 230  | 50  | 80  | 300  | 340  | I|  pfam:link_1  | enzyme_EC:link_1  | description:free_text  |
| Query_1  | HMM_file_2  | HMM_hit_2  | HMM_hit_accession_2  | 3.9e-87  | 230  | 1  | 200  | 100  | 320  | I|  ko:link_1  | enzyme_EC:link_2  | description:free_text  |

See [how are hits generated?](https://github.com/PedroMTQ/mantis/wiki/Additional-information#how-are-hits-generated) to understand how Mantis is capable of capturing multiple matches for the same protein sequence within the same reference dataset.
However, some query sequences may have different hits against our HMM sources, it is therefore necessary to find some sort of consensus between the several hits:

The `consensus_annotation.tsv` will look something like this:  

| Query  | HMM_Files | HMM_Hits | Consensus_hits | Total_hits | I | Links |  |  |
| :-------------: | :-------------: | :-------------:| :-------------:| :-------------: | :-------------: | :------------- | :------------- | :------------- |
| Query_1  | HMM_file_1;HMM_file_2  | HMM_hit_1;HMM_hit_2  | 3 | 3 | I|  pfam:link_1  | enzyme_EC:link_2  | description:free_text  |
| Query_2  | HMM_file_3;  | HMM_hit_3  | 4 | 5 | I | ko:link_1  | description:free_text  |  |

The consensus coverage is the amount of hit sources that reached a consensus out of all the hit sources for the current query sequence (if there are 4 hits in the consensus and we had a total of 5 hits, then the consensus coverage is 4/5). If the consensus coverage is quite low, consider also taking a look at the results in the interpreted_annotation.tsv.    
Note how each line now corresponds to a query sequence and how this query sequence can match against different HMM sources, thus having different HMM profile matches.  
The consensus is not a mere agglomerate of all the matches found across the different HMM sources, it is actually a group of hits that form a consensus. Please see [how are hit consensus generated?](https://github.com/PedroMTQ/mantis/wiki/Additional-information#how-are-hit-consensus-generated) for more information.


## Other outputs

Mantis also generates other output files and folders, these can be viewed to keep track of job's execution or HMMER's output files.
 - domtblout: contains the domtblout files generated by [HMMER](http://eddylab.org/software/hmmer3/3.1b2/Userguide.pdf#page=75)
 - output_hmmer: contains HMMER's console output
 - Mantis.out: contains Mantis's console output
